# API Consistency Improvement Checklist

## 1. یکسان‌سازی پارامترها در سرویس‌ها
- [x] ایجاد چک‌لیست اولیه
- [x] بررسی و اصلاح تمام endpointها برای استفاده از الگوی یکسان:
  - [x] Path parameters به صورت جداگانه
  - [x] Query parameters در آبجکت params
  - [x] Body data در آبجکت body واحد
- [x] تبدیل تمام formDataها به body object
- [x] حذف پارامترهای تکی از امضای متدها

## 2. اصلاح مدل‌ها (Models)
- [x] بررسی interfaceهای موجود برای bodyها
- [x] ایجاد interfaceهای اختصاصی برای انواع body:
  - [x] فرم‌دیتا (FormData)
  - [x] JSON payloads
- [x] تطابق کامل مدل‌ها با اسکیماهای Swagger
- [x] بررسی و اصلاح نوع‌دهی پارامترها:
  - [x] فایل‌ها (File/Blob)
  - [x] مقادیر عددی بزرگ (int64)
  - [x] آرایه‌ها و آبجکت‌های پیچیده

## 3. هماهنگی بین لایه‌ها
- [x] بررسی تطابق پارامترهای presentation و service
- [x] بازنویسی کدهای ناهماهنگ
- [x] استفاده یکسان از مدل‌ها در تمام لایه‌ها:
  - [x] سرویس‌ها
  - [x] presentation hooks
  - [x] endpointها
- [ ] اصلاح generatorها برای تولید کد هماهنگ

## 4. اصلاح generatorها
- [x] بازبینی serviceGenerator:
  - [x] الگوی یکسان برای تولید متدها
  - [x] پشتیبانی استاندارد از انواع پارامترها
- [x] بررسی modelGenerator:
  - [x] تولید دقیق تایپ‌ها
  - [x] ایجاد اینترفیس‌های لازم برای formData
- [ ] اصلاح endpointGenerator:
  - [ ] ساختار استاندارد endpointها
  - [ ] پشتیبانی از پارامترهای پویا

## 5. بررسی و رفع خطاها
- [ ] رفع مشکل parsing در endpoints.ts
- [x] بررسی خطاهای TypeScript در ماژول pet
- [ ] تست end-to-end تمام متدها:
  - [ ] uploadFile با فایل واقعی
  - [ ] عملیات CRUD استاندارد
  - [ ] موارد edge case

## پیشنهادات فنی برای بهبود
1. **Base Classes:**
   - [ ] ایجاد کلاس پایه برای پارامترهای استاندارد API
   - [ ] طراحی ساختار یکپارچه برای پاسخ‌ها
   - [ ] پیاده‌سازی سیستم مدیریت خطای مرکزی

2. **Validation System:**
   - [ ] ایجاد اعتبارسنجی برای پارامترهای ورودی
   - [ ] پیاده‌سازی بررسی ساختار body
   - [ ] توسعه اعتبارسنجی نوع فایل‌ها

3. **Testing Suite:**
   - [ ] نوشتن تست‌های واحد برای سرویس‌ها
   - [ ] ایجاد تست integration برای presentation hooks
   - [ ] توسعه تست validation مدل‌ها
